<template>
  <g id="skeleton">
    <!-- #region Shadow -->
    <ellipse
      id="shadow"
      cx="210.067"
      cy="365.758"
      rx="67.605"
      ry="12.7919"
      fill="black"
      fill-opacity="0.4"
    />
    <!-- #endregion -->

    <!-- #region Footer Color -->
    <g :id="`footer-color-${setId}`">
      <path
        d="M207.535 269.742C203.345 254.86 190.769 253.726 185.004 255.019C175.348 277.453 176.109 335.641 177.697 361.93C177.697 368.15 183.517 370.445 186.426 370.816C192.571 371.852 196.086 367.915 197.075 365.817C199.729 311.317 205.154 279.059 207.535 269.742Z"
        fill="#FFCDB0"
        stroke="#FC9C67"
        stroke-width="2"
        stroke-linejoin="round"
      />
      <path
        d="M211.806 269.742C215.996 254.86 228.572 253.726 234.336 255.019C243.993 277.453 243.231 335.641 241.643 361.93C241.643 368.15 235.824 370.445 232.914 370.816C226.769 371.852 223.254 367.915 222.265 365.817C219.612 311.317 214.186 279.059 211.806 269.742Z"
        fill="#FFCDB0"
        stroke="#FC9C67"
        stroke-width="2"
        stroke-linejoin="round"
      />
      <path
        d="M196.423 365.724C195.06 368.149 192.078 369.738 191.021 369.817C191.021 364.752 193.041 299.519 196.933 275.927C201.184 278.299 203.29 278.367 204.854 278.86C199.04 314.242 197.095 349.43 196.423 365.724Z"
        fill="#FFBB95"
      />
      <path
        d="M222.918 365.724C224.28 368.149 227.263 369.738 228.319 369.817C228.319 364.752 226.299 299.519 222.408 275.927C218.157 278.299 216.051 278.367 214.486 278.86C220.301 314.242 222.246 349.43 222.918 365.724Z"
        fill="#FFBB95"
      />
    </g>
    <!-- #endregion -->

    <!-- #region Body Color -->
    <g :id="`body-color-${setId}`">
      <path
        d="M214.97 194.299C222.227 195.113 228.297 197.841 230.874 199.775C231.283 200.048 231.644 200.369 231.959 200.728C234.681 202.508 236.794 206.871 237.714 209.559C244.076 227.951 257.914 241.223 264.038 245.56C267.892 248.072 268.855 249.674 268.855 250.162C268.985 251.439 266.925 251.253 265.878 251.001C269.169 255.245 269.126 257.497 268.693 258.092C267.957 259.24 265.826 258.228 264.852 257.578C265.743 259.31 265.223 260.348 264.852 260.651C263.768 261.58 261.722 260.263 260.834 259.489L255.458 254.494L256.059 259.163C256.315 261.503 255.432 261.921 254.959 261.838C252.687 261.364 251.922 257.578 251.823 255.744C249.125 252.999 248.254 249.676 248.156 248.358C241.421 241.268 236.007 233.124 232.054 226.025C231.423 232.78 230.874 239.524 230.874 242.356C231.311 245.092 231.969 247.047 232.754 249.382C233.402 251.305 234.135 253.486 234.904 256.573C235.897 260.564 226.212 278.605 210.366 278.605C190.539 278.605 184.439 259.847 184.439 256.573C184.836 254.994 185.277 253.666 185.776 252.163C186.548 249.839 187.459 247.096 188.563 242.356C189.03 237.751 188.619 231.151 187.932 224.872C183.931 232.231 178.298 240.881 171.195 248.358C171.097 249.676 170.226 252.999 167.528 255.744C167.43 257.578 166.664 261.364 164.393 261.838C163.919 261.921 163.036 261.503 163.293 259.163L163.894 254.494L158.517 259.489C157.63 260.263 155.583 261.58 154.499 260.651C154.128 260.348 153.609 259.31 154.499 257.578C153.526 258.228 151.395 259.24 150.658 258.092C150.225 257.497 150.182 255.245 153.473 251.001C152.427 251.253 150.366 251.439 150.496 250.162C150.496 249.675 151.46 248.072 155.314 245.56C161.438 241.223 175.276 227.951 181.638 209.559C182.631 206.656 186.404 201.191 190.117 199.449C194.664 195.866 200.131 194.671 204.541 194.278C204.902 192.025 204.74 189.362 204.573 188.075C208.888 186.684 213.175 187.495 214.779 188.075C214.456 190.303 214.676 192.64 214.97 194.299Z"
        fill="#FFCDB0"
        stroke="#FC9C67"
        stroke-width="2"
        stroke-linejoin="round"
      />
      <path
        d="M213.792 187.794C211.368 188.458 207.28 188.248 205.624 188.036C205.678 189.714 205.759 190.318 205.737 190.621C208.992 192.287 212.341 191.315 213.651 190.621C213.572 189.741 213.759 188.354 213.792 187.794Z"
        fill="#FFBB95"
      />
    </g>
    <!-- #endregion -->

    <!-- #region Header Color -->
    <g :id="`header-color-${setId}`">
      <path
        d="M150.689 152.058C150.229 145.765 153.44 141.441 155.103 140.066C168.65 144.455 170.524 162.583 169.768 171.099C155.16 170.165 150.963 158.016 150.689 152.058Z"
        fill="#FFBB95"
        stroke="#FC9C67"
        stroke-width="2"
      />
      <path
        d="M269.638 152.058C270.099 145.765 266.888 141.441 265.225 140.066C251.678 144.455 249.804 162.583 250.56 171.099C265.167 170.165 269.365 158.016 269.638 152.058Z"
        fill="#FFBB95"
        stroke="#FC9C67"
        stroke-width="2"
      />
      <path
        d="M150.507 102.629C154.769 58.6702 194.284 47.7905 210.097 48.4137C275.565 50.9938 274.594 114.235 264.779 143.757C260.231 150.998 257.068 158.168 256.133 162.218C248.842 182.596 228.442 188.157 210.097 188.157C182.429 189.279 168.034 171.332 164.295 162.218C162.425 155.114 158.53 146.951 156.817 143.757C151.021 136.279 150.196 113.222 150.507 102.629Z"
        fill="#FFCDB0"
        stroke="#FC9C67"
        stroke-width="2"
      />
    </g>
    <!-- #endregion -->

    <!-- #region Cheek -->
    <g id="cheek">
      <ellipse
        cx="179.945"
        cy="165.051"
        rx="10.765"
        ry="7.1953"
        fill="url(#cheek_paint_radial_0_1)"
      />
      <ellipse
        cx="241.431"
        cy="165.051"
        rx="10.765"
        ry="7.1953"
        fill="url(#cheek_paint_radial_0_2)"
      />
    </g>
    <!-- #endregion -->

    <!-- #region Note -->
    <g id="note">
      <ellipse
        cx="210.357"
        cy="159.007"
        rx="6.88694"
        ry="4.60323"
        transform="rotate(91.6631 210.357 159.007)"
        fill="url(#note_paint_radial_0_1)"
      />
    </g>
    <!-- #endregion -->

    <!-- #region Mouth -->
    <g id="mouth">
      <path
        d="M208.102 174.312C205.761 174.671 204.402 173.006 204.015 172.129C203.928 173.653 205.3 174.704 205.997 175.04C206.975 175.411 208.211 175.195 208.706 175.04C210.044 174.433 211.617 174.715 212.236 174.931C212.917 175.13 213.418 175.189 213.583 175.195C217.237 175.38 217.211 172.336 217.237 172.238C216.741 174.331 214.12 174.4 212.871 174.173C209.65 173.337 208.412 174.312 208.102 174.312Z"
        fill="#DD9C78"
      />
    </g>
    <!-- #endregion -->

    <!-- #region Eyes Color-->
    <g id="eyes-color" :class="isAnimation ? 'animation-eyes-default' : ''">
      <g :id="`eyes-right-${setId}`">
        <path
          d="M188.51 161.516C186.219 161.643 180.034 161.781 175.186 159.388C176.868 163.098 184.943 164.362 188.51 161.516Z"
          fill="#E4A581"
        />
        <path
          d="M194.963 136.985C192.25 133.955 183.265 130.405 173.516 136.386C176.432 130.977 189.263 127.128 194.963 136.985Z"
          fill="#E4A581"
        />
        <g>
          <path
            d="M199.216 148.172C199.216 155.882 192.457 162.131 184.119 162.131C175.78 162.131 169.021 155.882 169.021 148.172C169.021 140.463 175.78 134.213 184.119 134.213C192.457 134.213 199.216 140.463 199.216 148.172Z"
            fill="white"
          />
          <path
            d="M199.16 147.402C183.072 140.517 172.588 146.707 169.357 150.663C168.016 139.611 177.645 135.157 182.628 134.312C194.368 133.442 198.541 142.676 199.16 147.402Z"
            fill="#E1E1E1"
          />
          <path
            d="M196.889 148.172C196.889 154.351 191.881 159.359 185.702 159.359C179.524 159.359 174.515 154.351 174.515 148.172C174.515 141.994 179.524 136.985 185.702 136.985C191.881 136.985 196.889 141.994 196.889 148.172Z"
            fill="#282828"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M185.702 157.809C191.024 157.809 195.339 153.494 195.339 148.172C195.339 142.85 191.024 138.536 185.702 138.536C180.38 138.536 176.066 142.85 176.066 148.172C176.066 153.494 180.38 157.809 185.702 157.809ZM185.702 159.359C191.881 159.359 196.889 154.351 196.889 148.172C196.889 141.994 191.881 136.985 185.702 136.985C179.524 136.985 174.515 141.994 174.515 148.172C174.515 154.351 179.524 159.359 185.702 159.359Z"
            fill="black"
          />
          <path
            d="M184.182 135.191C194.325 134.722 198.229 143.106 198.913 147.356C200.613 147.574 200.365 145.133 200.028 143.885C198.913 140.271 197.47 138.788 196.788 137.976C191.799 132.032 184.524 132.357 181.177 132.846C168.807 135.191 166.642 146.086 167.106 151.24C167.224 153.175 168.23 153.317 168.719 153.146C169.364 152.97 169.427 151.802 169.379 151.24C169.559 138.32 179.822 135.392 184.182 135.191Z"
            fill="black"
          />
          <path
            d="M183.573 145.173C183.573 146.829 182.23 148.172 180.574 148.172C178.917 148.172 177.575 146.829 177.575 145.173C177.575 143.517 178.917 142.174 180.574 142.174C182.23 142.174 183.573 143.517 183.573 145.173Z"
            fill="white"
          />
        </g>
      </g>
      <g :id="`eyes-left-${setId}`">
        <path
          d="M232.196 161.516C234.486 161.643 240.671 161.781 245.519 159.388C243.838 163.098 235.763 164.362 232.196 161.516Z"
          fill="#E4A581"
        />
        <path
          d="M225.743 136.985C228.456 133.955 237.44 130.405 247.19 136.386C244.274 130.977 231.442 127.128 225.743 136.985Z"
          fill="#E4A581"
        />
        <g>
          <path
            d="M221.489 148.172C221.489 155.882 228.249 162.131 236.587 162.131C244.925 162.131 251.685 155.882 251.685 148.172C251.685 140.463 244.925 134.213 236.587 134.213C228.249 134.213 221.489 140.463 221.489 148.172Z"
            fill="white"
          />
          <path
            d="M221.545 147.402C237.634 140.517 248.118 146.707 251.349 150.663C252.69 139.611 243.06 135.157 238.078 134.312C226.338 133.442 222.165 142.676 221.545 147.402Z"
            fill="#E1E1E1"
          />
          <path
            d="M223.816 148.172C223.816 154.351 228.825 159.359 235.003 159.359C241.182 159.359 246.19 154.351 246.19 148.172C246.19 141.994 241.182 136.985 235.003 136.985C228.825 136.985 223.816 141.994 223.816 148.172Z"
            fill="#282828"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M235.003 157.809C229.681 157.809 225.367 153.494 225.367 148.172C225.367 142.85 229.681 138.536 235.003 138.536C240.325 138.536 244.64 142.85 244.64 148.172C244.64 153.494 240.325 157.809 235.003 157.809ZM235.003 159.359C228.825 159.359 223.816 154.351 223.816 148.172C223.816 141.994 228.825 136.985 235.003 136.985C241.182 136.985 246.19 141.994 246.19 148.172C246.19 154.351 241.182 159.359 235.003 159.359Z"
            fill="black"
          />
          <path
            d="M236.523 135.191C226.381 134.722 222.477 143.106 221.793 147.356C220.092 147.574 220.341 145.133 220.677 143.885C221.793 140.271 223.236 138.788 223.918 137.976C228.906 132.032 236.181 132.357 239.528 132.846C251.899 135.191 254.063 146.086 253.599 151.24C253.482 153.175 252.475 153.317 251.987 153.146C251.342 152.97 251.278 151.802 251.327 151.24C251.147 138.32 240.884 135.392 236.523 135.191Z"
            fill="black"
          />
          <path
            d="M227.067 145.173C227.067 146.829 228.41 148.172 230.066 148.172C231.722 148.172 233.065 146.829 233.065 145.173C233.065 143.517 231.722 142.174 230.066 142.174C228.41 142.174 227.067 143.517 227.067 145.173Z"
            fill="white"
          />
        </g>
      </g>
    </g>
    <!-- #endregion -->

    <!-- #region eyebrow -->
    <g id="eyebrow">
      <path
        d="M224.635 122.617C229.977 119.746 243.94 116.851 257.049 128.238C252.145 122.218 238.797 112.665 224.635 122.617Z"
        fill="#1C1818"
      />
      <path
        d="M196.806 122.617C191.464 119.746 177.501 116.851 164.392 128.238C169.296 122.218 182.644 112.665 196.806 122.617Z"
        fill="#1C1818"
      />
    </g>
    <!-- #endregion -->
  </g>
</template>

<script>
import { onMounted, watch } from "vue";
export default {
  props: {
    bodyColor: {
      type: String,
      default: "",
    },
    isAnimation: {
      type: Boolean,
      default: false,
    },
    setId: {
      type: String,
      default: "",
    },
    isShop: {
      type: Boolean,
      default: false,
    },
    isCreateCharacter: {
      type: Boolean,
      default: false,
    },
  },
  setup(props) {
    const LightenDarkenColor = (col) => {
      if (col[0] == "#") {
        col = col.slice(1);
      }

      let amt = -30;

      let r,
        g,
        b = 0;

      if (col == "000000" || col == "000") {
        amt = 30;
      }

      if (col.length == 3) {
        r = "0x" + col[0] + col[0];
        g = "0x" + col[1] + col[1];
        b = "0x" + col[2] + col[2];
      } else if (col.length == 6) {
        r = "0x" + col[0] + col[1];
        g = "0x" + col[2] + col[3];
        b = "0x" + col[4] + col[5];
      }

      r = parseInt(r, 16) + amt;
      g = parseInt(g, 16) + amt;
      b = parseInt(b, 16) + amt;

      if (r > 255) r = 255;
      else if (r < 0) r = 0;
      if (g > 255) g = 255;
      else if (g < 0) g = 0;
      if (b > 255) b = 255;
      else if (b < 0) b = 0;

      return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
    };

    const funcChangeColor = () => {
      let strokeColor = LightenDarkenColor(props.bodyColor);
      // let elEar = document.getElementById("ear-color");
      // for (let i = 0; i < elEar.children.length; i++) {
      //   elEar.children[i].attributes.fill.value = earColor;
      // }

      let elEyesLeft = document.getElementById(`eyes-left-${props.setId}`);
      for (let i = 0; i < elEyesLeft.children.length; i++) {
        if (elEyesLeft.children[i].attributes.fill) {
          elEyesLeft.children[i].attributes.fill.value = strokeColor;
        }
      }

      let elEyesRight = document.getElementById(`eyes-right-${props.setId}`);
      for (let i = 0; i < elEyesRight.children.length; i++) {
        if (elEyesRight.children[i].attributes.fill) {
          elEyesRight.children[i].attributes.fill.value = strokeColor;
        }
      }

      let elHeader = document.getElementById(`header-color-${props.setId}`);
      for (let i = 0; i < elHeader.children.length; i++) {
        if (elHeader.children[i].attributes.stroke) {
          elHeader.children[i].attributes.stroke.value = strokeColor;
          elHeader.children[i].attributes.fill.value = props.bodyColor;
        } else {
          elHeader.children[i].attributes.fill.value = strokeColor;
        }
      }

      let elBody = document.getElementById(`body-color-${props.setId}`);
      for (let i = 0; i < elBody.children.length; i++) {
        if (elBody.children[i].attributes.stroke) {
          elBody.children[i].attributes.stroke.value = strokeColor;
          elBody.children[i].attributes.fill.value = props.bodyColor;
        } else {
          elBody.children[i].attributes.fill.value = strokeColor;
        }
      }

      let elFooter = document.getElementById(`footer-color-${props.setId}`);
      for (let i = 0; i < elFooter.children.length; i++) {
        if (elFooter.children[i].attributes.stroke) {
          elFooter.children[i].attributes.stroke.value = strokeColor;
          elFooter.children[i].attributes.fill.value = props.bodyColor;
        } else {
          elFooter.children[i].attributes.fill.value = strokeColor;
        }
        elFooter.children[i].attributes.fill.value = props.bodyColor;
      }
    };

    watch(
      () => props.bodyColor,
      () => {
        funcChangeColor();
      }
    );

    onMounted(() => {
      funcChangeColor();
    });
  },
};
</script>

<style lang="scss" scoped>
@import url("../../css/animation-eyes.css");
</style>
